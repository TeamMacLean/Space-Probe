<% function filesize(bytes, other) {
    const si = other | true;
    const thresh = si ? 1000 : 1024;
    if (Math.abs(bytes) < thresh) {
        return bytes + ' B';
    }
    const units = si
            ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']
            : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];
    let u = -1;
    do {
        bytes /= thresh;
        ++u;
    } while (Math.abs(bytes) >= thresh && u < units.length - 1);
    return bytes.toFixed(1) + ' ' + units[u];
} %>
<% const total = scratchFolders.reduce((total, current) => {
    return total + current.size
}, 0)
%>


<h2 class="center mt-5 mb-2">Scratch <%- filesize(total) %></h2>
<table class="table">
    <thead>
    <tr>
        <th>Name</th>
        <th>Size</th>
        <th>Change</th>
        <th>xFiles</th>
    </tr>
    </thead>
    <tbody>
    <% scratchFolders.sort(function (a, b) {
        return b.size - a.size
    }).map((rf)=>{ %>
    <tr>
        <td><a href="/scratch/<%- rf.name %>"><%- rf.name %></a></td>
        <td><%- rf.sizeHuman %></td>
        <td>
            <%- rf.sizeDifferenceHuman %>
        </td>
        <td>
            <%- rf.xfiles ? rf.xfiles.length : 'n/a' %>
        </td>
    </tr>
    <% }) %>
    </tbody>
</table>